<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Caesar Cipher</title>
</head>
<body>
    <div id="form">
    <form id="caesarForm">
        <label for="plainText">Plain Text:</label>
        <input id="plainText" name="plainText" required>
        <br>
        <label for="shift">Shift:</label>
        <input id="shift" name="shift" type="number" required>
        <br>
        <button type="submit">Run</button>
    </form>
    <hr>
    <h2>Output:</h2>
    </div>
    <div id="output"></div>

    <script>

    var form = document.getElementById("caesarForm");
    function submitForm(event) {
        event.preventDefault();
        form.style.display = "none"; 
        main();
    }
    form.addEventListener('submit', submitForm);
    function main() {
        //clean plainText
        document.getElementById("output").innerHTML = "<p></p>";
        let plainText = document.getElementById("plainText").value;
        let count = 0;
        let done = false;
        let ans = "";
        const ABC = "abcdefghijklmnopqrstuvwxyz";
        let shift = Number(document.getElementById("shift").value);
        let i = 0;
        let upperCase = false;

        while (done == false) {
            i=0;
            //say on which count we're on
            console.log(plainText[count]);

            //check if the plainText is at the and
            if (plainText[count] == null) {
                console.log("done");
                break;
            }

            //check if the letter is UpperCase
            if (plainText[count] == plainText[count].toUpperCase()) 
            {
                upperCase = true;
            } else 
            {
                upperCase = false;
            }
            
            

            while (true) {
                console.info(i);
                // if it is lower letter then the first if
                if (ABC[i%26] == plainText[count] && upperCase == false) //i modulus 26 makes every number rotatable for e.g. if shift is -1 then its -1%26 which is 25 which stands for 'Z' and its usefull because -1 to 'A' is 'Z'
                {
                    // logging that it found what alphabet it is
                    console.log("found: \"" + ABC[i%26] + "\" from Plaintext at " + count + ".");

                    // logging what the cipher alphabet is
                    
                    console.log("encrypting with the key \'" + shift + "\' and cipher alphabet is now \'" + ABC[(i + shift)%26] + "\' at " + count + ".");
                    console.error(i+"+"+shift);
                    console.error((i+shift)%26);
                    console.error((i+shift));
                    console.error(i);
                    //adding the cipher snippet to the whole cipher text with the shift
                    ans = ans + ABC[(i+shift)%26];
                    console.log(ans);

                    //adding one to the count
                    count++;

                    break;
                } else if (ABC[i%26].toUpperCase() == plainText[count] && upperCase == true) // jusgt copied everything from above and changed it so its uppercase
                {
                    // logging that it found what alphabet it is
                    console.log("found: \"" + ABC[i%26].toUpperCase() + "\" from Plaintext at " + count + ".");

                    // logging what the cipher alphabet is
                    console.log("encrypting with the key \'" + shift + "\' and cipher alphabet is now \'" + ABC[(i + shift)%26].toUpperCase() + "\' at " + count + ".");
                    console.error(i+"+"+shift);
                    console.error((i+shift));
                    console.error((i+shift));
                    console.log(i);
                    //adding the cipher snippet to the whole cipher text with the shift
                    ans = ans + ABC[(i+shift)%26].toUpperCase()
                    console.log(ans);
                    //adding one to the count
                    count++;

                    break;
                } else if (plainText[count] == " ") 
                {
                    // JUST ADD THE SPACE AND THE COUNT 
                    ans = ans + " ";
                    count++;
                    
                    break;
                } else if (plainText[count] == ".") 
                {
                    // JUST ADD THE point AND THE COUNT 
                    ans = ans + ".";
                    count++;
                    
                    break;
                } else if (plainText[count] == ",") 
                {
                    // JUST ADD THE komma AND THE COUNT 
                    ans = ans + ",";
                    count++;
                    
                    break;
                } else 
                {
                    //to cycle through the alphabeth to find the correct letter.
                    i++;
                }
            }
        }
        //show answer
        console.info(ans);
        document.getElementById("output").innerHTML = "<p>" + ans + "</p>" + "<br>" + "<button onclick=\"window.location.reload();\">Reload</button>";
    }
    </script>
</body>
</html>
